<div class="container-fluid">
    <h1 class="mt-4">Thêm món</h1>
    <ol class="breadcrumb mb-4">
        <li class="breadcrumb-item active">Thêm món</li>
    </ol>
    <div class="card mb-4">
        <div class="card-header">
            <i class="fas fa-plus mr-1"></i>
            Thêm món
        </div>
        <div class="card-body">
            <form id="addproductform" action="../products/addnew/create" method="POST" enctype="multipart/form-data">
                <div class="form-group">
                    <label for="title">Tên món</label>
                    <input type="text" class="form-control" id="title" name="title">
                </div>
                <div class="form-group">
                    <label for="cover">Hình ảnh</label>
                    <input type="text" class="form-control" id="cover" name="cover">
                </div>
                <div class="form-group">
                    <label for="category">Phân loại</label>
                    <select class="form-control" id="category" name="category">
                        <option>foods</option>
                        <option>drinks</option>
                        <option>desserts</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="basePrice">Giá</label>
                    <input type="number" class="form-control" id="basePrice" name="basePrice">
                </div>
                <div class="form-group">
                    <label for="description">Mô tả</label>
                    <textarea class="form-control" id="description" rows="3" name="description"></textarea>
                </div>
                <div class="form-group">
                    <label for="coverimage">Ảnh đại diện</label>
                    <input type="file" class="form-control" id="coverimage" name="coverimage">
                </div>
                <div class="form-group">
                    <label for="multiplefile">Multiple</label>
                    <button id="upload_widget" class="cloudinary-button" type="button" name="multiplefile">Upload files</button>        
                </div>
            </form>
            <button type="button" class="btn btn-primary" onclick="submit()">Submit</button>
        </div>
    </div>
</div>

<script src="https://widget.cloudinary.com/v2.0/global/all.js" type="text/javascript"></script>
<script type="text/javascript">  
  //  var myWidget = cloudinary.createUploadWidget({
   // cloudName: 'davjklfpl', 
   // uploadPreset: 's5px9gj8',
  //  folder: 'fast-shop'}, (error, result) => { 
  //      if (!error && result && result.event === "success") { 
  //      console.log('Done! Here is the image info: ', result.info);
   //         resultupload = result.info; 
   //     }
  //  }
  //  )
  let resultupload=["","",""];
  let i=0;
    cloudinary.applyUploadWidget(document.getElementById('upload_widget'), 
    { cloudName: "davjklfpl", uploadPreset: "s5px9gj8", folder: 'fast-shop' }, 
    (error, result) => {
        if(!error && result && result.event === "success"){ 
            console.log("ket qua: ", result.info);
            resultupload[i]=result.info.secure_url;
            i++;
        }
    });
   // document.getElementById("upload_widget").addEventListener("click", function(){
    //    myWidget.open();
    //}, false);

    function submit(){
        const form = document.getElementById("addproductform");
        //const url1 = document.createElement("input");
        //url1.name = "url1";
        //const url2 = document.createElement("input");
        //url2.name = "url2";
        //const url3 = document.createElement("input");
        //url3.name = "url3";
        for(i=0;i<3;i++){
            const urltemp = document.createElement("input");
            urltemp.name = "url" + i;
            urltemp.value = resultupload[i];
            form.appendChild(urltemp);
            console.log("cai urltemp: ", urltemp);
        }


        form.submit();
    }

</script>


